let DEBUG_MODE,ValidationError,CustomErrorHandler;_dd0‍.x([["default",()=>_dd0‍.o]]);_dd0‍.w("../config",[["DEBUG_MODE",["DEBUG_MODE"],function(v){DEBUG_MODE=v}]]);_dd0‍.w("joi",[["ValidationError",["ValidationError"],function(v){ValidationError=v}]]);_dd0‍.w("./CustomErrorHandler",[["default",["CustomErrorHandler"],function(v){CustomErrorHandler=v}]]);




const errorHandler = (error, req, res, next) => {

        let statusCode = 500;
        let data = {
            message: "Internal server error",
            ...(DEBUG_MODE === "true" && {originalError: error.message})
        }

        if(error instanceof ValidationError){
            statusCode = 422;
            data = {
                message: error.message
            };
        }

        if(error instanceof CustomErrorHandler){
            statusCode = error.statusCode;
            data = {
                message: error.message
            };
        }

        
        return res.status(statusCode).send(data);
}

_dd0‍.d(errorHandler);